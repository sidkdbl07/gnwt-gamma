<template name="userEdit">
  <nav>
    <div class="nav-wrapper grey lighten-3" style="padding-left: 10px">
      <div class="col s12">
        <a href="{{pathFor '/users'}}" class="breadcrumb grey-text text-darken-3">Users</a>
        <span class="breadcrumb grey-text text-darken-3">{{getUser.profile.fullname}}</span>
      </div>
    </div>
  </nav>
  {{#if isSubReady 'user'}}
    {{#with getUser}}
      <div style="position: absolute; top: 78px; right: 50%;">
        {{#if isInRole 'admin' 'default_group'}}
        <a href="#" id="save_a_user" class="btn waves-effect waves-light light-green tooltipped"  data-position="bottom" data-delay="50" data-tooltip="Save this user">Save</a>
        {{/if}}
      </div>
      <div class="row">
        <div class="input-field col s5">
          <form id="form_user_edit">
          <div class="input-field">
            <input type="hidden" id="edit_user_id" value="{{_id}}"/>
            <input type="text" id="edit_user_fullname" name="edit_user_fullname" class="validate" required="" aria-required="true" value="{{profile.fullname}}"/>
            <label class="active" for="edit_user_fullname" >Full Name</label>
          </div>
          <div class="input-field">
            <input type="email" id="edit_user_email" name="edit_user_email" class="validate" required="" aria-required="true"  value="{{emails.[0].address}}" />
            <label class="active" for="edit_user_email">eMail Address</label>
          </div>
          <div class="input-field">
            <label>Permissions</label>
            <br/>
          </div>
          <div class="input-field">
            <div class="input-field">
                <div class="input-field col s4">
                   <input id="field" type="radio" name="edit_user_role" value="field" {{checkedIf "field"}}>
                   <label for="field">Field</label>
                </div>
                <div class="input-field col s4">
                   <input id="manager" type="radio" name="edit_user_role" value="manager" {{checkedIf "manager"}}>
                   <label for="manager">Manager</label>
                </div>
                <div class="input-field col s4">
                   <input id="admin" type="radio" name="edit_user_role" value="admin"  {{checkedIf "admin"}}>
                   <label for="admin">Administrator</label>
                </div>
             </div>
          </div>
          </form>
        </div>
          <div class="col s6 offset-s1">
          <div class="card grey lighten-3">
            <div class="card-content">
              <span class="card-title">Modifying a User</span>
              <br/>
              <p>A few things to keep in mind while entering a new user:<br/>
                - A user's email address must be unique<br/>
                - A user's password must contain 5 characters minimum<br/><br/>
              </p>
            </div>
          </div>
          {{> userChangePassword}}
        </div>
      </div>
    {{/with}}
  {{else}}
    {{> loading}}
  {{/if}}
</template>

<template name="userChangePassword">
  <div class="card grey lighten-3">
    <div class="card-content">
      <span class="card-title">Change Password</span>
      <br/>
      <form id="userPasswordForm" novalidate="novalidate">
      <div class="row">
        <div class="input-field col s12">
          <input type="hidden" id="edit_user_password_id" value="{{_id}}"/>
          <input type="password" id="edit_user_password" name="edit_user_password" class="validate" required="" aria-required="true" />
          <label for="edit_user_password" >New Password</label>
        </div>
      </div>
      </form>
    </div>
    <div class="card-action">
      <a href="#" id="submit_user_edit_pass" class="light-green-text">Change Password</a>
    </div>
  </div>
</template>
