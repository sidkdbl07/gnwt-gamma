<template name="bookEdit">
  <nav>
    <div class="nav-wrapper grey lighten-3" style="padding-left: 10px">
      <div class="col s12">
        <a href="{{pathFor '/books'}}" class="breadcrumb grey-text text-darken-3">Books</a>
        <span class="breadcrumb grey-text text-darken-3">{{getBook.name}}</span>
      </div>
    </div>
  </nav>
  {{#if isSubReady 'book'}}
    {{#with getBook}}
    <div style="position: absolute; top: 78px; right: 10%;">
      <span class="grey-text text-darken-3">Current view:</span> <a href="#" id="book_view" class="dropdown-button btn-flat waves-effect waves-light green-text"  data-activates="view_type"><i class="material-icons right">arrow_drop_down</i>ELEMENTS</a>
      <ul id="view_type" class="dropdown-content">
        <li><a id="btn_book_details" href="#" class="green-text">BOOK DETAILS</a></li>
        <li><a id="btn_book_elements" href="#" class="green-text">ELEMENTS</a></li>
        <li><a id="btn_book_rules" href="#" class="green-text">RULES</a></li>
      </ul>
    </div>
    <div class="row book-view" id="book_elements">
      <div class="col s12">
        {{> bookElements}}
      </div>
    </div>
    <div class="book-view" id="book_details" style="display: none;">
      {{#if isInRole 'admin' 'default_group'}}
      <div style="position: absolute; top: 78px; right: 2%;">
        <a href="#" id="save_book" style="margin-left: 20px;" class="btn waves-effect waves-light light-green tooltipped" data-position="bottom" data-delay="50" data-tooltip="Save book">Save</a>
      </div>
      {{/if}}
      <div class="row">
        <div class="col s5">
          <div class="row">
            <div class="input-field col s12">
              <input type="hidden" id="edit_book_id" name="edit_book_id" value="{{_id}}"/>
              <input type="text" placeholder="Enter the name of the book" id="edit_book_name" name="edit_book_name" class="validate" value="{{name}}"/>
              <label for="edit_book_name" class="active" >Name of Book</label>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row book-view" id="book_rules" style="display: none;">
      <div class="col s5">
        Rules
      </div>
    </div>
    {{/with}}
  {{else}}
    {{> loading}}
  {{/if}}
</template>

<template name="bookElements">
  <div class="row">
    <div class="col s2">
      <div class="grey-text" style="margin-top: 20px;">Question Types</div>
      <div class="sortable">
      {{#sortable items=bookElementTypes options=bookElementTypesOptions}}
        <div class="element"><i class="material-icons">{{icon type}}</i>{{name}}</div>
      {{/sortable}}
      </div>
      <div class="grey-text" style="margin-top: 20px;">Map Types</div>
      <div class="sortable">
      {{#sortable items=bookMapTypes options=bookElementTypesOptions}}
        <div class="element"><i class="material-icons">{{icon type}}</i>{{name}}</div>
      {{/sortable}}
      </div>
      <div class="grey-text" style="margin-top: 20px;">Layout</div>
      <div class="sortable">
      {{#sortable items=bookLayoutTypes options=bookElementTypesOptions}}
        <div class="element"><i class="material-icons">{{icon type}}</i>{{name}}</div>
      {{/sortable}}
      </div>
    </div>
    <div class="col s10">
      <div class="grey-text" style="margin-top: 20px;">Elements</div>
      <div class="sortable">
      {{#sortable items=bookElements options=bookElementsOptions}}
        <div class="element {{type}}" >
          <div class="bookelement" id={{_id}}><i class="material-icons grey-text handle item">drag_handle</i><i class="material-icons item">{{icon type}}</i><span class="truncate item">{{text}}</span></div>
          <div id="details_{{_id}}" class="bookelementdetails inactive grey lighten-2">{{> bookElementDetails}}</div>
        </div>
      {{/sortable}}
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col s3">

    </div>
  </div>
</template>
